<div id="<%= "main-sidebar--group-by-day-list-#{@pagy&.vars&.dig(:page)}" %>" data-controller="infinite-scroll" class="">
	<div>
		<% @events.group_by { |e| e.start_time.to_date }&.each do |group| %>
			<div id="<%= "main-sidebar--group-#{group[0]}" %>" class="relative pb-6 mb-3 border-b last:border-b-0">
				<div class="sticky top-0 z-10 flex-1 pt-3 pb-3 pl-1 mb-3 -ml-1 leading-6 text-gray-600 bg-white md:top-16 md:bg-white md:leading-normal md:pb-2">
					<div class="md:pt-4">
						<div class="text-xs">
							<%= l(group[0]&.to_date, format: "%d/%m") %>
							<% if group[0].to_date > Date.today + 2 %>
								&nbsp;<%= "· daqui #{distance_of_time_in_words(group[0]&.to_datetime, DateTime.now, false, highest_measure_only: true)}" %>
							<% end %>
						</div>
						<div class="flex space-x-2 select-none">
							<h2 class="flex items-center text-gray-800 uppercase">
								<%= link_to day_events_path(day: group[0].to_date.strftime("%d-%m-%Y")), class: 'font-display text-sm font-medium', data: { 'turbo-preserve-scroll': true } do %>
									<% if group[0].to_date.today? %>
										Hoje, <%= I18n.l(group[0]&.to_date, format: :week).titlecase %>
									<% elsif group[0].to_date == Date.tomorrow %>
										Amanhã, <%= I18n.l(group[0]&.to_date, format: :week).titlecase %>
									<% elsif group[0].to_date <= Date.today + 7 %>
										<%= I18n.l(group[0]&.to_date, format: :week).titlecase %>
									<% else %>
										<%= I18n.l(group[0]&.to_date, format: :week).titlecase %>, <%= I18n.l(group[0]&.to_date, format: :long).titlecase %>
									<% end %>
								<% end %>
							</h2>
						</div>
					</div>
				</div>
				<div class="space-y-8">
					<%= render MainSidebar::HorizontalEventComponent.with_collection(group[1], user: @user, open_in_sidebar: @open_in_sidebar) %>
				</div>
			</div>
		<% end %>
	</div>
	<% if @pagy && @pagy&.last != @pagy&.page %>
		<div id="main-sidebar--group-by-day-list--pagination" data-infinite-scroll-target="pagination" class="mt-3 mb-10 w-content">
			<%== helpers.pagy_nav(@pagy) %>
		</div>
	<% end %>
</div>
