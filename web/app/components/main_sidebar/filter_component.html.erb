<%= content_tag :div, id: 'main-sidebar--filter', data: { controller: 'main-sidebar--filter', 'main-sidebar--filter-loading-value': false }, class: 'transition-all duration-300 translate-x-32' do %>
	<div class="flex flex-wrap px-5 pt-4">
		<% if @filters[:categories].present? %>
			<div data-reflex="click->Filter#open"
					 data-filter-group="category"
					 class="<%= helpers.class_names('bg-brand-200 text-brand-600 items-center cursor-pointer duration-50 flex font-semibold hover:bg-brand-200 hover:border-brand-200 hover:text-brand-600 inline-block justify-start mb-3 mr-3 px-4 py-2 rounded-full select-none tap-highlight-none transform transition-colors transition-all w-content') %>">
				<%= @filters[:categories].map { |category| Category::CATEGORIES.select { |hash| hash['name'] == category }&.first['display_name'] }.join(', ') %>
				<div data-reflex="click->Filter#clear_filter"
						 data-filter-only="category">
					<svg xmlns="http://www.w3.org/2000/svg" class="-mr-1.5 fill-current h-5 hover:text-red-400 ml-1.5 w-5" viewBox="0 0 20 20" fill="currentColor">
						<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
					</svg>
				</div>
			</div>
		<% end %>
		<% if @filters[:date].present? %>
			<div data-reflex="click->Filter#open"
					 data-filter-group="date"
					 class="<%= helpers.class_names('bg-brand-200 text-brand-600 items-center cursor-pointer duration-50 flex font-semibold hover:bg-brand-200 hover:border-brand-200 hover:text-brand-600 inline-block justify-start mb-3 mr-3 px-4 py-2 rounded-full select-none tap-highlight-none transform transition-colors transition-all w-content') %>">
				<%= @filters[:date]&.to_date&.strftime("%d/%m/%y") %>
				<div data-reflex="click->Filter#filter"
						 data-filter-group="date"
						 data-selected="true"
						 data-filter-date="<%= @filters[:date] %>">
					<svg xmlns="http://www.w3.org/2000/svg" class="-mr-1.5 fill-current h-5 hover:text-red-400 ml-1.5 w-5" viewBox="0 0 20 20" fill="currentColor">
						<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
					</svg>
				</div>
			</div>
		<% end %>
		<% unless filters_present? %>
			<a href="<%= root_path theme: 'entretenimento-lazer' %>" data-turbo-preserve-scroll="true" class="<%= helpers.class_names('items-center cursor-pointer duration-50 flex font-semibold hover:bg-brand-200 hover:border-brand-200 hover:text-brand-600 inline-block justify-start mb-3 mr-3 px-4 py-2 rounded-full select-none tap-highlight-none transform transition-colors transition-all w-content',
																																																																{ 'bg-brand-200 text-brand-600': !params[:theme] || params[:theme] == 'entretenimento-lazer',
																																																																	'bg-gray-100 text-gray-600':   params[:theme] && params[:theme] != 'entretenimento-lazer' }) %>">
				<svg xmlns="http://www.w3.org/2000/svg" class="mr-2 w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/>
				</svg>
				Entretenimento
			</a>
			<a href="<%= root_path theme: 'trabalho-educacao' %>" data-turbo-preserve-scroll="true" class="<%= helpers.class_names('items-center cursor-pointer duration-50 flex font-semibold hover:bg-brand-200 hover:border-brand-200 hover:text-brand-600 inline-block justify-start mb-3 mr-3 px-4 py-2 rounded-full select-none tap-highlight-none transform transition-colors transition-all w-content',
																																																														 { 'bg-brand-200 text-brand-600': params[:theme] == 'trabalho-educacao',
																																																															 'bg-gray-100 text-gray-600':   params[:theme] != 'trabalho-educacao' }) %>">
				<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
				</svg>
				<svg xmlns="http://www.w3.org/2000/svg" class="mr-2 w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
				</svg>
				Trabalho & Educação
			</a>
		<% end %>
		<div data-reflex="click->Filter#open" class="<%= helpers.class_names('items-center cursor-pointer duration-50 flex font-semibold hover:bg-brand-200 hover:border-brand-200 hover:text-brand-600 inline-block justify-start mb-3 mr-3 px-4 py-2 rounded-full select-none tap-highlight-none transform transition-colors transition-all w-content',
																																				 { 'bg-brand-200 text-brand-600': filters_present?,
																																					 'bg-gray-100 text-gray-600':   !filters_present? }) %>">
			<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
			</svg>
		</div>
	</div>

	<% if @open %>
		<div class="overflow-y-auto fixed inset-0 z-50">
			<div class="flex justify-center items-center px-4 pt-4 pb-20 min-h-screen text-center sm:block sm:p-0">

				<div data-reflex="click->Filter#close" class="fixed inset-0 transition-opacity" aria-hidden="true">
					<div class="absolute inset-0 bg-gray-500 opacity-75"></div>
				</div>

				<!-- This element is to trick the browser into centering the modal contents. -->
				<span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

				<div class="inline-block overflow-hidden p-5 text-left align-bottom bg-white rounded-lg shadow-xl transition-all transform sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
					<svg data-reflex="click->Filter#close" xmlns="http://www.w3.org/2000/svg" class="absolute cursor-pointer h-6 hover:text-brand-500 right-5 top-5 w-6" viewBox="0 0 20 20" fill="currentColor">
						<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
					</svg>
					<div class="flex items-center pb-2 text-xl font-bold text-gray-900 bg-white font-display">
						Filtros
						<svg data-main-sidebar--filter-target="loadingIcon" class="ml-2 w-7 h-7 opacity-0 transition-opacity fill-current text-brand-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
							<path fill="none" d="M0 0h24v24H0V0z"/>
							<path d="M17.65 6.35c-1.63-1.63-3.94-2.57-6.48-2.31-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20c3.19 0 5.93-1.87 7.21-4.56.32-.67-.16-1.44-.9-1.44-.37 0-.72.2-.88.53-1.13 2.43-3.84 3.97-6.8 3.31-2.22-.49-4.01-2.3-4.48-4.52C5.31 9.44 8.26 6 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71l-.64.65z"/>
						</svg>
					</div>
					<div class="flex flex-wrap mb-3">
						<div data-reflex="click->Filter#show_filter_group"
								 data-filter-group="category"
								 data-open="<%= @show_filter_group == 'category' %>"
								 class="<%= helpers.class_names('items-center border cursor-pointer duration-50 flex font-semibold hover:bg-brand-200 hover:border-brand-200 hover:text-brand-600 inline-block justify-start mb-2 mr-2 pl-1.5 pr-4 py-2 rounded-full select-none tap-highlight-none transform transition-all transition-colors w-content',
																								{ 'bg-brand-200 border-brand-200 text-brand-600': @filters[:categories].present? || @show_filter_group == 'category' }) %>">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="<%= helpers.class_names('fill-current w-5 mr-1 transform transition-transform',
																																																				 { 'rotate-180': @show_filter_group == 'category' }) %>">
								<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
							</svg>
							<%= @filters[:categories].present? ? @filters[:categories].map { |category| Category::CATEGORIES.select { |hash| hash['name'] == category }&.first['display_name'] }.join(', ') : 'Categorias' %>
						</div>
						<div data-reflex="click->Filter#show_filter_group"
								 data-filter-group="date"
								 data-open="<%= @show_filter_group == 'date' %>"
								 class="<%= helpers.class_names('items-center border cursor-pointer duration-50 flex font-semibold hover:bg-brand-200 hover:border-brand-200 hover:text-brand-600 inline-block justify-start mb-2 mr-2 pl-1.5 pr-4 py-2 rounded-full select-none tap-highlight-none transform transition-all transition-colors w-content',
																								{ 'bg-brand-200 border-brand-200 text-brand-600': @filters[:date] || @show_filter_group == 'date' }) %>">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="<%= helpers.class_names('fill-current w-5 mr-1 transform transition-transform',
																																																				 { 'rotate-180': @show_filter_group == 'date' }) %>">
								<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
							</svg>
							<%= @filters[:date] ? @filters[:date]&.to_date&.strftime("%d/%m/%y") : 'Data' %>
						</div>
						<% if filters_present? %>
							<div data-reflex="click->Filter#clear_filter"
									 data-filter-group="category"
									 class="inline-block flex justify-start items-center py-2 pr-4 pl-4 mr-2 mb-2 font-semibold text-gray-700 bg-gray-100 rounded-full transition-all transition-colors transform cursor-pointer select-none duration-50 hover:bg-red-200 hover:text-red-700 tap-highlight-none w-content">
								Limpar
							</div>
						<% end %>
					</div>
					<div class="space-y-6">
						<% if @show_filter_group == 'date' %>
							<div data-main-sidebar--filter-target="filters">
								<div class="flex flex-wrap">
									<% (Date.today..(Date.today + 7)).each do |day| %>
										<div data-reflex="click->Filter#filter"
												 data-filter-group="date"
												 data-selected="<%= @filters[:date]&.to_date == day %>"
												 data-filter-date="<%= day %>"
												 class="<%= helpers.class_names('items-center cursor-pointer duration-50 flex font-semibold text-sm hover:bg-brand-200 hover:border-brand-200 hover:text-brand-600 inline-block justify-start mb-3 mr-3 px-4 py-2 rounded-full select-none tap-highlight-none transform transition-colors transition-all w-content',
																												{ 'bg-brand-200 text-brand-600': @filters[:date]&.to_date == day,
																													'bg-gray-100 text-gray-600':   !@filters[:date] || @filters[:date]&.to_date != day }) %>">
											<%= helpers.day_of_week(day) %>
										</div>
									<% end %>
								</div>
							</div>
						<% end %>
						<% if @show_filter_group == 'category' %>
							<div data-main-sidebar--filter-target="filters">
								<!--				<div class="flex items-baseline mb-1 space-x-3">-->
								<!--					<h2 class="block mb-2 text-gray-900">-->
								<!--						Categorias-->
								<!--					</h2>-->
								<!--				</div>-->
								<div class="flex flex-wrap lowercase">
									<% @categories.each do |category| %>
										<% if @params&.dig(:category) %>
											<%= link_to category.details_display_name, category_events_path(category.details_url), class: helpers.class_names('border cursor-pointer duration-50 flex font-semibold hover:bg-brand-200 hover:border-brand-200 hover:text-brand-600 inline-block justify-start mb-2 mr-2 px-4 py-1 rounded-full select-none tap-highlight-none transform transition-colors transition-all w-content',
																																																																				{ 'bg-brand-200 border-brand-200 text-brand-600': @filters[:categories]&.include?(category.details_name),
																																																																					'text-gray-500':                                !@filters[:categories]&.include?(category.details_name) }) %>
										<% else %>
											<div data-reflex="click->Filter#filter"
													 data-filter-group="category"
													 data-selected="<%= @filters[:categories]&.include?(category.details_name) %>"
													 data-filter-category="<%= category.details_name %>"
													 class="<%= helpers.class_names('items-center cursor-pointer duration-50 flex font-semibold text-sm hover:bg-brand-200 hover:border-brand-200 hover:text-brand-600 inline-block justify-start mb-3 mr-3 px-4 py-2 rounded-full select-none tap-highlight-none transform transition-colors transition-all w-content',
																													{ 'bg-brand-200 text-brand-600': @filters[:categories]&.include?(category.details_name),
																														'bg-gray-100 text-gray-600':   !@filters[:categories]&.include?(category.details_name) }) %>">
												<%= category.details_display_name %>
											</div>
										<% end %>
									<% end %>
								</div>
							</div>
						<% end %>
					</div>
				</div>
			</div>
		</div>
	<% end %>
<% end %>
