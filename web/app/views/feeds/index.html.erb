<%= render Modal::SignInComponent.new(text: nil) %>

<div id="main-content" class="md:grid md:grid-cols-12 max-w-screen-xl mx-auto">
	<% unless mobile_device? %>
		<section class="hidden md:inline-block md:col-span-3 md:bg-white sticky w-72"
						 id="left-sidebar"
						 data-controller="simple-scrollbar"
						 style="height: calc(100vh - 64px); top: 64px">
			<%= render LeftSidebar::CalendarComponent.new(events: @liked_events, start_date: Date.today, user: current_user, filter: false, indicators: @indicators) %>
		</section>
	<% end %>
	<section id="main-sidebar" class="col-span-12 md:col-span-5">
		<div class="mx-auto mb-24 is-animated sm:container">
			<% unless params[:day] || params[:category] %>
				<div id="hero__presentation" data-turbo-permanent class="flex flex-row-reverse gap-4 items-start mb-12 md:flex md:flex-row md:mb-5 md:mx-0 md:px-5 mx-5 pt-5 select-none tap-highlight-none" style="min-height: <%= mobile_device? ? '150px' : '225px' %>">
					<div class="my-auto">
						<h2 class="font-bold font-display text-gray-900 md:text-xl">
							Aproveite Porto Alegre
						</h2>
						<span class="inline-block leading-snug mt-2 text-gray-500 text-sm md:text-base">
  						Descubra eventos e siga seus locais e artistas favoritos para não perder nada que acontece na cidade.
  					</span>
					</div>
					<%= image_pack_tag ["hero/bebendo.png", "hero/dancando.png", "hero/skate.png", "hero/leitor-e-cao.png", "hero/passeando.png"].sample, class: 'h-32 md:h-44 md:w-auto my-auto w-32' %>
				</div>
				<%= render Hero::SwipableComponent.new(user: current_user) %>
			<% end %>
			<% if @upcoming_events.present? %>
				<div class="<%= class_names('bg-white pb-2') %>">
					<% if params[:category] %>
						<div class="flex items-center justify-between md:pr-10 pr-5">
							<h2 class="font-bold font-display md:text-3xl pl-5 pt-3 text-gray-900 text-xl">
								<span class="text-brand-500 underline"><%= @category&.details_display_name&.titleize %></span> em Porto
								Alegre
							</h2>
						</div>
					<% else %>
						<h2 class="bg-white font-bold font-display px-5 text-gray-900 text-xl">
							Eventos em Porto Alegre <%= I18n.l params[:day].to_date if params[:day] %>
						</h2>
					<% end %>
<!--					<div class="flex gap-1 px-5 text-gray-400 text-xs items-center" title="Devido ao Covid19 o número de eventos está abaixo do normal">-->
<!--						Atualizado há <%#= time_ago_in_words @upcoming_events&.last&.updated_at %>-->
<!--						<svg class="stroke-current w-4 h-4" fill="none"-->
<!--								 stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">-->
<!--							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>-->
<!--						</svg>-->
<!--					</div>-->
					<div class="flex flex-wrap px-5 pt-4">
						<a href="<%= root_path theme: 'entretenimento-lazer' %>" data-turbo-preserve-scroll="true" class="<%= class_names('cursor-pointer duration-50 flex font-semibold hover:bg-brand-200 hover:border-brand-200 hover:text-brand-600 inline-block justify-start mb-3 mr-3 px-4 py-2 rounded-full select-none tap-highlight-none transform transition-colors transition-all w-content',
																																																															{ 'bg-brand-200 text-brand-600': !params[:theme] || params[:theme] == 'entretenimento-lazer',
																																																																'bg-gray-100 text-gray-600':   params[:theme] && params[:theme] != 'entretenimento-lazer' }) %>">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/>
							</svg>
							Entretenimento
						</a>
						<a href="<%= root_path theme: 'trabalho-educacao' %>" data-turbo-preserve-scroll="true" class="<%= class_names('cursor-pointer duration-50 flex font-semibold hover:bg-brand-200 hover:border-brand-200 hover:text-brand-600 inline-block justify-start mb-3 mr-3 px-4 py-2 rounded-full select-none tap-highlight-none transform transition-colors transition-all w-content',
																																																													 { 'bg-brand-200 text-brand-600': params[:theme] == 'trabalho-educacao',
																																																														 'bg-gray-100 text-gray-600':   params[:theme] != 'trabalho-educacao' }) %>">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
							</svg>
							<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
							</svg>
							Trabalho & Educação
						</a>
					</div>
				</div>
			<% else %>
				<h2 class="mt-5 font-display text-gray-900 font-bold px-5 text-2xl md:text-3xl">
					Não foram encontrados eventos em Porto
					Alegre <%= I18n.l params[:day].to_date if params[:day] %> <%= "na categoria #{@category&.details_display_name&.titleize}" if params[:category] %>
				</h2>
			<% end %>
			<%= render MainSidebar::GroupByDayListComponent.new(events: @upcoming_events, user: current_user, open_in_sidebar: true) %>
		</div>
	</section>
	<% unless mobile_device? %>
		<section id="right-sidebar" class="hidden md:inline-block md:bg-white md:h-full md:col-span-4 will-change">
			<div data-controller="loader"
					 data-loader-on-loading="horizontal-event#open-event:before"
					 data-loader-on-loaded="horizontal-event#open-event:success"
					 class="px-5 sticky top-20 z-10">
				<div id="open-event"
						 data-loader-target="loaded">
					<%= render MainSidebar::LargeEventComponent.new(user: current_user, event: nil) %>
				</div>
				<div
					class="flex items-center justify-center hidden h-16 mt-5 bg-white border border-gray-100 shadow-lg h-screen-8/10 rounded-xl text-md"
					data-loader-target="loading">
					Carregando
					<svg data-loader-target="onIcon" class="w-5 h-5 ml-2 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
						<path fill="none" d="M0 0h24v24H0V0z"/>
						<path d="M17.65 6.35c-1.63-1.63-3.94-2.57-6.48-2.31-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20c3.19 0 5.93-1.87 7.21-4.56.32-.67-.16-1.44-.9-1.44-.37 0-.72.2-.88.53-1.13 2.43-3.84 3.97-6.8 3.31-2.22-.49-4.01-2.3-4.48-4.52C5.31 9.44 8.26 6 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71l-.64.65z"/>
					</svg>
				</div>
			</div>
			<%= render MainSidebar::FilterComponent.new(session:           session.id,
																									params:            params,
																									show_filter_group: nil,
																									filters:           {
																										categories: params[:category] ? [Category::CATEGORIES.select { |hash| hash['url'] == params[:category] }.first['name']] : [],
																										date:       nil
																									}) %>
		</section>
	<% end %>

	<div data-controller="install" class="select-none tap-highlight-none bottom-20 fixed transform transition-transform translate-y-32 w-full z-30">
		<div data-action="click->install#install" data-install-target="button" class="bg-brand-500 bg-white font-bold mx-auto px-5 py-3 rounded-full shadow-lg text-white w-content">
			Instalar aplicativo
		</div>
	</div>

</div>




