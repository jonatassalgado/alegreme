<%

  return unless local_assigns.fetch(:user, false)
  return unless local_assigns.fetch(:followable, false)

%>


<div class="me-follow-chip-set"
     data-controller="follow-button"
     data-follow-button-identifier="<%= followable.slug || followable.id %>"
     data-follow-button-followed="<%= user.try { |user| user.public_send("following_#{followable.class.name.parameterize}?", followable) } %>"
     data-follow-button-followable="<%= followable.id %>"
     data-follow-button-type="<%= followable.class.name.parameterize.pluralize %>">
  <div class="me-follow-button mdc-chip <%= 'mdc-chip--selected' if user.try { |user| user.public_send("following_#{followable.class.name.parameterize}?", followable) } %>"
       data-action="click->follow-button#follow"
       data-target="follow-button.button"
       id="add-to-favorites">
    <i class="material-icons mdc-chip__icon mdc-chip__icon--leading">
      <svg class="follow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
        <path fill="none" d="M0 0h24v24H0V0z"/>
        <path d="M9 16.17L5.53 12.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L9 16.17z"/>
      </svg>
      <svg class="following" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
        <path fill="none" d="M0 0h24v24H0V0z"/>
        <path d="M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z"/>
      </svg>
    </i>
    <div class="me-follow-button__text mdc-chip__text"
         data-target="follow-button.text">
      <%= user.try { |user| user.public_send("following_#{followable.class.name.parameterize}?", followable) } ? 'Seguindo' : 'Seguir' %>
    </div>
  </div>
</div>
