(function () {

//	const eventLiked = new CustomEvent('eventLiked', {
//		'detail': {
//			'currentEventFavorited': <%#= @locals[:current_event_favorited] %>,
//			'eventId'              : <%#= @locals[:event_id] %>
//		}
//	});

	const promise = new Promise(function (resolve, reject) {
		const savesWrapperEl = document.getElementById('saves');

    if (savesWrapperEl) {
	    const morph = morphdom.default(savesWrapperEl, '<%= j render partial: "feeds/saves", locals: @locals %>'.trim(), {
		    onBeforeElUpdated: function (fromEl, toEl) {
			    return !fromEl.isEqualNode(toEl);
		    }
	    });

			resolve(morph)
		} else {
			resolve()
		}

	})

	promise.then(function (value) {
		postal.publish({
			channel: "saves",
			topic  : "saves.updated",
			data   : {
				detail: {
					currentEventFavorited: <%= @locals[:current_event_favorited] %>,
					eventId              : <%= @locals[:event_id] %>
				}
			}
		});
	})


//	let savesElem    = savesWrapper.querySelector('[data-controller="favorite"]')

//	savesElem.dispatchEvent(eventLiked);

//	let eventElem = document.getElementById('<%= @locals[:event_identifier] %>');

//	eventElem.dispatchEvent(eventLiked);


})()